(()=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _toPropertyKey(t){var e=function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_typeof(e)?e:String(e)}function LarekAPI_typeof(t){return LarekAPI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LarekAPI_typeof(t)}function LarekAPI_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,LarekAPI_toPropertyKey(o.key),o)}}function LarekAPI_toPropertyKey(t){var e=function LarekAPI_toPrimitive(t,e){if("object"!=LarekAPI_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=LarekAPI_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LarekAPI_typeof(e)?e:String(e)}function _callSuper(t,e,r){return e=_getPrototypeOf(e),function _possibleConstructorReturn(t,e){if(e&&("object"===LarekAPI_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_isNativeReflectConstruct()?Reflect.construct(e,r||[],_getPrototypeOf(t).constructor):e.apply(t,r))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}var t=function(t){function LarekAPI(t,e,r){var o;return function LarekAPI_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LarekAPI),(o=_callSuper(this,LarekAPI,[e,r])).cdn=t,o}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(LarekAPI,t),function LarekAPI_createClass(t,e,r){return e&&LarekAPI_defineProperties(t.prototype,e),r&&LarekAPI_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(LarekAPI,[{key:"getItems",value:function getItems(){var t=this;return this.get("/product").then((function(e){return e.items.map((function(e){return Object.assign(Object.assign({},e),{image:t.cdn+e.image})}))}))}},{key:"getItem",value:function getItem(t){var e=this;return this.get("/product/".concat(t)).then((function(t){return Object.assign(Object.assign({},t),{image:e.cdn+t.image})}))}},{key:"sendOrder",value:function sendOrder(t){return this.post("/order",t).then((function(t){return t}))}}]),LarekAPI}(function(){function Api(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=t,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(e=r.headers)&&void 0!==e?e:{})}}return function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Api,[{key:"handleResponse",value:function handleResponse(t){return t.ok?t.json():t.json().then((function(e){var r;return Promise.reject(null!==(r=e.error)&&void 0!==r?r:t.statusText)}))}},{key:"get",value:function get(t){return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:r,body:JSON.stringify(e)})).then(this.handleResponse)}}]),Api}()),e="".concat("","/api/weblarek"),r="".concat("","/content/weblarek"),o={"софт-скил":"_soft",другое:"_other",дополнительное:"_additional",кнопка:"_button","хард-скил":"_hard"};function Events_typeof(t){return Events_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Events_typeof(t)}function Events_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Events_toPropertyKey(o.key),o)}}function Events_toPropertyKey(t){var e=function Events_toPrimitive(t,e){if("object"!=Events_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Events_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Events_typeof(e)?e:String(e)}var n=function(){function EventEmitter(){!function Events_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function Events_createClass(t,e,r){return e&&Events_defineProperties(t.prototype,e),r&&Events_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(EventEmitter,[{key:"on",value:function on(t,e){var r;this._events.has(t)||this._events.set(t,new Set),null===(r=this._events.get(t))||void 0===r||r.add(e)}},{key:"off",value:function off(t,e){var r;this._events.has(t)&&(this._events.get(t).delete(e),0===(null===(r=this._events.get(t))||void 0===r?void 0:r.size)&&this._events.delete(t))}},{key:"emit",value:function emit(t,e){this._events.forEach((function(r,o){(o instanceof RegExp&&o.test(t)||o===t)&&r.forEach((function(t){return t(e)}))}))}},{key:"onAll",value:function onAll(t){this.on("*",t)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(t,e){var r=this;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.emit(t,Object.assign(Object.assign({},o||{}),e||{}))}}}]),EventEmitter}();function Component_typeof(t){return Component_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Component_typeof(t)}function Component_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Component_toPropertyKey(o.key),o)}}function Component_toPropertyKey(t){var e=function Component_toPrimitive(t,e){if("object"!=Component_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Component_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Component_typeof(e)?e:String(e)}var i=function(){function Component(t){!function Component_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Component),this.container=t}return function Component_createClass(t,e,r){return e&&Component_defineProperties(t.prototype,e),r&&Component_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Component,[{key:"toggleClass",value:function toggleClass(t,e,r){t.classList.toggle(e,r)}},{key:"setText",value:function setText(t,e){t&&(t.textContent=String(e))}},{key:"setDisabled",value:function setDisabled(t,e){t&&(e?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"))}},{key:"setHidden",value:function setHidden(t){t.style.display="none"}},{key:"setVisible",value:function setVisible(t){t.style.removeProperty("display")}},{key:"setImage",value:function setImage(t,e,r){t&&(t.src=e,r&&(t.alt=r))}},{key:"render",value:function render(t){return Object.assign(this,null!=t?t:{}),this.container}}]),Component}();function isSelector(t){return"string"==typeof t&&t.length>1}function ensureElement(t,e){if(isSelector(t)){var r=function ensureAllElements(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(t))return Array.from(e.querySelectorAll(t));if(t instanceof NodeList)return Array.from(t);if(Array.isArray(t))return t;throw new Error("Unknown selector element")}(t,e);if(r.length>1&&console.warn("selector ".concat(t," return more then one element")),0===r.length)throw new Error("selector ".concat(t," return nothing"));return r.pop()}if(t instanceof HTMLElement)return t;throw new Error("Unknown selector element")}function cloneTemplate(t){return ensureElement(t).content.firstElementChild.cloneNode(!0)}function Page_typeof(t){return Page_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Page_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return Page_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function Page_unsupportedIterableToArray(t,e){if(!t)return;if("string"==typeof t)return Page_arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Page_arrayLikeToArray(t,e)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Page_arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function Page_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Page_toPropertyKey(o.key),o)}}function Page_toPropertyKey(t){var e=function Page_toPrimitive(t,e){if("object"!=Page_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Page_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Page_typeof(e)?e:String(e)}function Page_callSuper(t,e,r){return e=Page_getPrototypeOf(e),function Page_possibleConstructorReturn(t,e){if(e&&("object"===Page_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Page_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Page_isNativeReflectConstruct()?Reflect.construct(e,r||[],Page_getPrototypeOf(t).constructor):e.apply(t,r))}function Page_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Page_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Page_getPrototypeOf(t){return Page_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Page_getPrototypeOf(t)}function Page_setPrototypeOf(t,e){return Page_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Page_setPrototypeOf(t,e)}var a=function(t){function Page(t,e){var r;return function Page_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Page),(r=Page_callSuper(this,Page,[t])).events=e,r._counter=ensureElement(".header__basket-counter"),r._catalog=ensureElement(".gallery"),r._wrapper=ensureElement(".page__wrapper"),r._basket=ensureElement(".header__basket"),r._basket.addEventListener("click",(function(){r.events.emit("basket:open")})),r}return function Page_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Page_setPrototypeOf(t,e)}(Page,t),function Page_createClass(t,e,r){return e&&Page_defineProperties(t.prototype,e),r&&Page_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Page,[{key:"counter",set:function set(t){this.setText(this._counter,String(t))}},{key:"catalog",set:function set(t){var e;(e=this._catalog).replaceChildren.apply(e,_toConsumableArray(t))}},{key:"locked",set:function set(t){t?this._wrapper.classList.add("page__wrapper_locked"):this._wrapper.classList.remove("page__wrapper_locked")}}]),Page}(i);function Modal_typeof(t){return Modal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Modal_typeof(t)}function Modal_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Modal_toPropertyKey(o.key),o)}}function Modal_toPropertyKey(t){var e=function Modal_toPrimitive(t,e){if("object"!=Modal_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Modal_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Modal_typeof(e)?e:String(e)}function Modal_callSuper(t,e,r){return e=Modal_getPrototypeOf(e),function Modal_possibleConstructorReturn(t,e){if(e&&("object"===Modal_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Modal_assertThisInitialized(t)}(t,Modal_isNativeReflectConstruct()?Reflect.construct(e,r||[],Modal_getPrototypeOf(t).constructor):e.apply(t,r))}function Modal_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Modal_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Modal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,e,r){var o=function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Modal_getPrototypeOf(t)););return t}(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},_get.apply(this,arguments)}function Modal_getPrototypeOf(t){return Modal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Modal_getPrototypeOf(t)}function Modal_setPrototypeOf(t,e){return Modal_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Modal_setPrototypeOf(t,e)}var c=function(t){function Modal(t,e){var r;return function Modal_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Modal),(r=Modal_callSuper(this,Modal,[t])).events=e,r._closeButton=ensureElement(".modal__close",t),r._content=ensureElement(".modal__content",t),r._closeButton.addEventListener("click",r.close.bind(Modal_assertThisInitialized(r))),r.container.addEventListener("click",r.close.bind(Modal_assertThisInitialized(r))),r._content.addEventListener("click",(function(t){return t.stopPropagation()})),r}return function Modal_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Modal_setPrototypeOf(t,e)}(Modal,t),function Modal_createClass(t,e,r){return e&&Modal_defineProperties(t.prototype,e),r&&Modal_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Modal,[{key:"content",set:function set(t){this._content.replaceChildren(t)}},{key:"open",value:function open(){this.container.classList.add("modal_active"),this.events.emit("modal:open")}},{key:"close",value:function close(){this.container.classList.remove("modal_active"),this.content=null,this.events.emit("modal:close")}},{key:"render",value:function render(t){return _get(Modal_getPrototypeOf(Modal.prototype),"render",this).call(this,t),this.open(),this.container}}]),Modal}(i);function Basket_typeof(t){return Basket_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Basket_typeof(t)}function Basket_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Basket_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Basket_toPropertyKey(o.key),o)}}function Basket_createClass(t,e,r){return e&&Basket_defineProperties(t.prototype,e),r&&Basket_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Basket_toPropertyKey(t){var e=function Basket_toPrimitive(t,e){if("object"!=Basket_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Basket_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Basket_typeof(e)?e:String(e)}function Basket_callSuper(t,e,r){return e=Basket_getPrototypeOf(e),function Basket_possibleConstructorReturn(t,e){if(e&&("object"===Basket_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Basket_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Basket_isNativeReflectConstruct()?Reflect.construct(e,r||[],Basket_getPrototypeOf(t).constructor):e.apply(t,r))}function Basket_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Basket_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Basket_getPrototypeOf(t){return Basket_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Basket_getPrototypeOf(t)}function Basket_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Basket_setPrototypeOf(t,e)}function Basket_setPrototypeOf(t,e){return Basket_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Basket_setPrototypeOf(t,e)}var s=function(t){function BasketItem(t,e){var r;return Basket_classCallCheck(this,BasketItem),(r=Basket_callSuper(this,BasketItem,[t])).container=t,r._counter=t.querySelector(".basket__item-index"),r._title=ensureElement(".card__title",t),r._price=t.querySelector(".card__price"),r._deleteButton=t.querySelector(".basket__item-delete"),r._deleteButton.addEventListener("click",e.onClick),r}return Basket_inherits(BasketItem,t),Basket_createClass(BasketItem,[{key:"counter",set:function set(t){this.setText(this._counter,t)}},{key:"title",set:function set(t){this.setText(this._title,t)}},{key:"price",set:function set(t){null===t?this.setText(this._price,"Бесценно"):this.setText(this._price,t+" синапсов")}}]),BasketItem}(i),u=function(t){function Basket(t,e){var r;return Basket_classCallCheck(this,Basket),(r=Basket_callSuper(this,Basket,[t])).events=e,r._list=ensureElement(".basket__list",r.container),r._total=r.container.querySelector(".basket__price"),r._button=r.container.querySelector(".basket__button"),r._button.addEventListener("click",(function(){e.emit("order:open")})),r.items=[],r}return Basket_inherits(Basket,t),Basket_createClass(Basket,[{key:"items",set:function set(t){var e=this;if(this._list.replaceChildren(),t.length){var r=ensureElement("#card-basket");t.forEach((function(t,o){var n=new s(cloneTemplate(r),{onClick:function onClick(){return e.events.emit("card:removeFromBasket",t)}}).render({title:t.title,price:t.price,counter:o+1});e._list.append(n)}))}this.setButtonState(t)}},{key:"total",set:function set(t){this.setText(this._total,t+" синапсов")}},{key:"setButtonState",value:function setButtonState(t){0===t.length?this._button.setAttribute("disabled",""):this._button.removeAttribute("disabled")}}]),Basket}(i);function Success_typeof(t){return Success_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Success_typeof(t)}function Success_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Success_toPropertyKey(o.key),o)}}function Success_toPropertyKey(t){var e=function Success_toPrimitive(t,e){if("object"!=Success_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Success_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Success_typeof(e)?e:String(e)}function Success_callSuper(t,e,r){return e=Success_getPrototypeOf(e),function Success_possibleConstructorReturn(t,e){if(e&&("object"===Success_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Success_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Success_isNativeReflectConstruct()?Reflect.construct(e,r||[],Success_getPrototypeOf(t).constructor):e.apply(t,r))}function Success_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Success_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Success_getPrototypeOf(t){return Success_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Success_getPrototypeOf(t)}function Success_setPrototypeOf(t,e){return Success_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Success_setPrototypeOf(t,e)}var f=function(t){function Success(t,e,r){var o;return function Success_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Success),(o=Success_callSuper(this,Success,[t]))._close=ensureElement(".order-success__close",o.container),o._totalPrice=ensureElement(".order-success__description",o.container),o.setText(o._totalPrice,"Списано ".concat(r," синапсов")),(null==e?void 0:e.onClick)&&o._close.addEventListener("click",e.onClick),o}return function Success_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Success_setPrototypeOf(t,e)}(Success,t),function Success_createClass(t,e,r){return e&&Success_defineProperties(t.prototype,e),r&&Success_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Success)}(i);function Model_typeof(t){return Model_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Model_typeof(t)}function Model_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Model_toPropertyKey(o.key),o)}}function Model_toPropertyKey(t){var e=function Model_toPrimitive(t,e){if("object"!=Model_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Model_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Model_typeof(e)?e:String(e)}var l=function(){function Model(t,e){!function Model_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Model),this.events=e,Object.assign(this,t)}return function Model_createClass(t,e,r){return e&&Model_defineProperties(t.prototype,e),r&&Model_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Model,[{key:"emitChanges",value:function emitChanges(t,e){this.events.emit(t,null!=e?e:{})}}]),Model}();function AppData_typeof(t){return AppData_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AppData_typeof(t)}function AppData_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,AppData_toPropertyKey(o.key),o)}}function AppData_createClass(t,e,r){return e&&AppData_defineProperties(t.prototype,e),r&&AppData_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function AppData_toPropertyKey(t){var e=function AppData_toPrimitive(t,e){if("object"!=AppData_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=AppData_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AppData_typeof(e)?e:String(e)}function AppData_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AppData_callSuper(t,e,r){return e=AppData_getPrototypeOf(e),function AppData_possibleConstructorReturn(t,e){if(e&&("object"===AppData_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function AppData_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,AppData_isNativeReflectConstruct()?Reflect.construct(e,r||[],AppData_getPrototypeOf(t).constructor):e.apply(t,r))}function AppData_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(AppData_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function AppData_getPrototypeOf(t){return AppData_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},AppData_getPrototypeOf(t)}function AppData_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AppData_setPrototypeOf(t,e)}function AppData_setPrototypeOf(t,e){return AppData_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},AppData_setPrototypeOf(t,e)}var p=function(t){function ProductItem(){return AppData_classCallCheck(this,ProductItem),AppData_callSuper(this,ProductItem,arguments)}return AppData_inherits(ProductItem,t),AppData_createClass(ProductItem)}(l),y=function(t){function AppData(){var t;return AppData_classCallCheck(this,AppData),(t=AppData_callSuper(this,AppData,arguments)).catalog=[],t.basket=[],t.order={payment:"",address:"",email:"",phone:"",items:[],total:0},t.formErrors={},t}return AppData_inherits(AppData,t),AppData_createClass(AppData,[{key:"setCatalog",value:function setCatalog(t){var e=this;this.catalog=t.map((function(t){return new p(t,e.events)})),this.emitChanges("items:changed",{catalog:this.catalog})}},{key:"setPreview",value:function setPreview(t){this.emitChanges("preview:changed",t)}},{key:"addItem",value:function addItem(t){this.basket.push(t),this.emitChanges("itemsListBasket: changed",this.basket)}},{key:"removeItem",value:function removeItem(t){this.basket=this.basket.filter((function(e){return e.id!==t})),this.emitChanges("itemsListBasket: changed",this.basket)}},{key:"getTotal",value:function getTotal(){return this.basket.reduce((function(t,e){return t+e.price}),0)}},{key:"setAddress",value:function setAddress(t){this.order.address=t,this.validatePaymentForm()}},{key:"setPaymentMethod",value:function setPaymentMethod(t){this.order.payment=t,this.validatePaymentForm()}},{key:"setContacts",value:function setContacts(t,e){this.order[t]=e,this.validateContactsForm()}},{key:"validatePaymentForm",value:function validatePaymentForm(){var t={};return this.order.address||(t.address="Необходимо указать адрес"),this.order.payment||(t.payment="Необходимо выбрать метод оплаты"),this.formErrors=t,this.events.emit("formErrors:change",this.formErrors),0===Object.keys(t).length}},{key:"validateContactsForm",value:function validateContactsForm(){var t={};return this.order.email||(t.email="Необходимо указать email"),this.order.phone||(t.phone="Необходимо указать телефон"),this.formErrors=t,this.events.emit("formErrors:change",this.formErrors),0===Object.keys(t).length}},{key:"setOrderData",value:function setOrderData(){var t=this;this.order.items=[],this.basket.forEach((function(e){null!==e.price&&t.order.items.push(e.id)})),this.order.total=this.getTotal()}},{key:"clearOrderForm",value:function clearOrderForm(){this.order={payment:"",address:"",email:"",phone:"",items:[],total:0}}},{key:"clearOrder",value:function clearOrder(){this.basket=[],this.emitChanges("itemsListBasket: changed",this.basket),this.clearOrderForm()}},{key:"isItemSelected",value:function isItemSelected(t){return this.basket.includes(t)}}]),AppData}(l);function Card_typeof(t){return Card_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Card_typeof(t)}function Card_toConsumableArray(t){return function Card_arrayWithoutHoles(t){if(Array.isArray(t))return Card_arrayLikeToArray(t)}(t)||function Card_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function Card_unsupportedIterableToArray(t,e){if(!t)return;if("string"==typeof t)return Card_arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Card_arrayLikeToArray(t,e)}(t)||function Card_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Card_arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function Card_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Card_toPropertyKey(o.key),o)}}function Card_toPropertyKey(t){var e=function Card_toPrimitive(t,e){if("object"!=Card_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Card_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Card_typeof(e)?e:String(e)}function Card_callSuper(t,e,r){return e=Card_getPrototypeOf(e),function Card_possibleConstructorReturn(t,e){if(e&&("object"===Card_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Card_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Card_isNativeReflectConstruct()?Reflect.construct(e,r||[],Card_getPrototypeOf(t).constructor):e.apply(t,r))}function Card_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Card_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Card_getPrototypeOf(t){return Card_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Card_getPrototypeOf(t)}function Card_setPrototypeOf(t,e){return Card_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Card_setPrototypeOf(t,e)}var _=function(t){function Card(t,e,r){var o;return function Card_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Card),(o=Card_callSuper(this,Card,[e])).blockName=t,o._title=ensureElement(".".concat(t,"__title"),e),o._image=ensureElement(".".concat(t,"__image"),e),o._button=e.querySelector(".".concat(t,"__button")),o._description=e.querySelector(".".concat(t,"__description")),o._category=ensureElement(".".concat(t,"__category"),e),o._price=ensureElement(".".concat(t,"__price"),e),(null==r?void 0:r.onClick)&&(o._button?o._button.addEventListener("click",r.onClick):e.addEventListener("click",r.onClick)),o}return function Card_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Card_setPrototypeOf(t,e)}(Card,t),function Card_createClass(t,e,r){return e&&Card_defineProperties(t.prototype,e),r&&Card_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Card,[{key:"id",set:function set(t){this.container.dataset.id=t}},{key:"title",set:function set(t){this.setText(this._title,t)}},{key:"description",set:function set(t){var e,r=this;Array.isArray(t)?(e=this._description).replaceWith.apply(e,Card_toConsumableArray(t.map((function(t){var e=r._description.cloneNode();return r.setText(e,t),e})))):this.setText(this._description,t)}},{key:"image",set:function set(t){this.setImage(this._image,t,this.title)}},{key:"category",set:function set(t){this.setText(this._category,t),this._category.classList.add("card__category"+o[t])}},{key:"price",get:function get(){return Number(this._price.textContent)},set:function set(t){null===t?(this.setText(this._price,"Бесценно"),this._button&&(this.setButtonState(),this.setText(this._button,"Нельзя купить"))):this.setText(this._price,t+" синапсов")}},{key:"setButtonState",value:function setButtonState(){this._button.setAttribute("disabled","")}},{key:"setSelected",value:function setSelected(){this.setText(this._button,"Уже в корзине")}}]),Card}(i);function Form_typeof(t){return Form_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Form_typeof(t)}function Form_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Form_toPropertyKey(o.key),o)}}function Form_toPropertyKey(t){var e=function Form_toPrimitive(t,e){if("object"!=Form_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Form_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Form_typeof(e)?e:String(e)}function Form_callSuper(t,e,r){return e=Form_getPrototypeOf(e),function Form_possibleConstructorReturn(t,e){if(e&&("object"===Form_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Form_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Form_isNativeReflectConstruct()?Reflect.construct(e,r||[],Form_getPrototypeOf(t).constructor):e.apply(t,r))}function Form_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Form_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Form_get(){return Form_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,e,r){var o=function Form_superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Form_getPrototypeOf(t)););return t}(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(arguments.length<3?t:r):n.value}},Form_get.apply(this,arguments)}function Form_getPrototypeOf(t){return Form_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Form_getPrototypeOf(t)}function Form_setPrototypeOf(t,e){return Form_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Form_setPrototypeOf(t,e)}var __rest=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(r[o[n]]=t[o[n]])}return r},d=function(t){function Form(t,e){var r;return function Form_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Form),(r=Form_callSuper(this,Form,[t])).container=t,r.events=e,r._submit=ensureElement("button[type=submit]",r.container),r._errors=ensureElement(".form__errors",r.container),r.container.addEventListener("input",(function(t){var e=t.target,o=e.name,n=e.value;r.onInputChange(o,n)})),r.container.addEventListener("submit",(function(t){t.preventDefault(),r.events.emit("".concat(r.container.name,":submit"))})),r}return function Form_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Form_setPrototypeOf(t,e)}(Form,t),function Form_createClass(t,e,r){return e&&Form_defineProperties(t.prototype,e),r&&Form_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Form,[{key:"onInputChange",value:function onInputChange(t,e){this.events.emit("".concat(this.container.name,".").concat(String(t),":change"),{field:t,value:e})}},{key:"valid",set:function set(t){this._submit.disabled=!t}},{key:"errors",set:function set(t){this.setText(this._errors,t)}},{key:"render",value:function render(t){var e=t.valid,r=t.errors,o=__rest(t,["valid","errors"]);return Form_get(Form_getPrototypeOf(Form.prototype),"render",this).call(this,{valid:e,errors:r}),Object.assign(this,o),this.container}}]),Form}(i);function Payment_typeof(t){return Payment_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Payment_typeof(t)}function Payment_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Payment_toPropertyKey(o.key),o)}}function Payment_toPropertyKey(t){var e=function Payment_toPrimitive(t,e){if("object"!=Payment_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Payment_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Payment_typeof(e)?e:String(e)}function Payment_callSuper(t,e,r){return e=Payment_getPrototypeOf(e),function Payment_possibleConstructorReturn(t,e){if(e&&("object"===Payment_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Payment_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Payment_isNativeReflectConstruct()?Reflect.construct(e,r||[],Payment_getPrototypeOf(t).constructor):e.apply(t,r))}function Payment_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Payment_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Payment_getPrototypeOf(t){return Payment_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Payment_getPrototypeOf(t)}function Payment_setPrototypeOf(t,e){return Payment_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Payment_setPrototypeOf(t,e)}var m=function(t){function PaymentForm(t,e){var r;return function Payment_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PaymentForm),(r=Payment_callSuper(this,PaymentForm,[t,e]))._buttonsPayment=Array.from(t.querySelectorAll(".button_alt")),r._buttonsPayment.forEach((function(t){t.addEventListener("click",(function(){e.emit("paymentMethod:changed",t)}))})),r}return function Payment_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Payment_setPrototypeOf(t,e)}(PaymentForm,t),function Payment_createClass(t,e,r){return e&&Payment_defineProperties(t.prototype,e),r&&Payment_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(PaymentForm,[{key:"address",set:function set(t){this.container.elements.namedItem("address").value=t}},{key:"setPaymentButton",value:function setPaymentButton(t){var e=this;this._buttonsPayment.forEach((function(r){e.toggleClass(r,"button_alt-active",r.name===t)}))}}]),PaymentForm}(d);function Contacts_typeof(t){return Contacts_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Contacts_typeof(t)}function Contacts_defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Contacts_toPropertyKey(o.key),o)}}function Contacts_toPropertyKey(t){var e=function Contacts_toPrimitive(t,e){if("object"!=Contacts_typeof(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=Contacts_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Contacts_typeof(e)?e:String(e)}function Contacts_callSuper(t,e,r){return e=Contacts_getPrototypeOf(e),function Contacts_possibleConstructorReturn(t,e){if(e&&("object"===Contacts_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function Contacts_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Contacts_isNativeReflectConstruct()?Reflect.construct(e,r||[],Contacts_getPrototypeOf(t).constructor):e.apply(t,r))}function Contacts_isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Contacts_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function Contacts_getPrototypeOf(t){return Contacts_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},Contacts_getPrototypeOf(t)}function Contacts_setPrototypeOf(t,e){return Contacts_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,e){return t.__proto__=e,t},Contacts_setPrototypeOf(t,e)}var b=function(t){function ContactsForm(t,e){return function Contacts_classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ContactsForm),Contacts_callSuper(this,ContactsForm,[t,e])}return function Contacts_inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Contacts_setPrototypeOf(t,e)}(ContactsForm,t),function Contacts_createClass(t,e,r){return e&&Contacts_defineProperties(t.prototype,e),r&&Contacts_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(ContactsForm,[{key:"phone",set:function set(t){this.container.elements.namedItem("phone").value=t}},{key:"email",set:function set(t){this.container.elements.namedItem("email").value=t}}]),ContactsForm}(d),v=new t(r,e),P=new n;P.onAll((function(t){var e=t.eventName,r=t.data;console.log(e,r)}));var h=ensureElement("#card-preview"),g=ensureElement("#card-catalog"),O=ensureElement("#basket"),C=ensureElement("#contacts"),k=ensureElement("#order"),S=ensureElement("#success"),w=new y({},P),j=new a(document.body,P),E=new c(ensureElement("#modal-container"),P),A=new m(cloneTemplate(k),P),T=new b(cloneTemplate(C),P),B=new u(cloneTemplate(O),P);P.on("items:changed",(function(){j.catalog=w.catalog.map((function(t){return new _("card",cloneTemplate(g),{onClick:function onClick(){return P.emit("card:selected",t)}}).render({title:t.title,image:t.image,description:t.description,category:t.category,price:t.price})}))})),P.on("order:submit",(function(){E.render({content:T.render({email:"",phone:"",valid:!1,errors:[]})})})),P.on("formErrors:change",(function(t){var e=t.email,r=t.phone,o=t.address,n=t.payment;A.valid=!o&&!n,T.valid=!e&&!r,A.errors=Object.values({address:o,payment:n}).filter((function(t){return!!t})).join("; "),T.errors=Object.values({phone:r,email:e}).filter((function(t){return!!t})).join("; ")})),P.on(/^contacts\..*:change/,(function(t){w.setContacts(t.field,t.value)})),P.on(/^order\..*:change/,(function(t){w.setAddress(t.value)})),P.on("order:open",(function(){E.render({content:A.render({payment:"",address:"",valid:!1,errors:[]})})})),P.on("paymentMethod:changed",(function(t){A.setPaymentButton(t.name),w.setPaymentMethod(t.name)})),P.on("contacts:submit",(function(){w.setOrderData(),v.sendOrder(w.order).then((function(){var t=new f(cloneTemplate(S),{onClick:function onClick(){E.close(),w.clearOrder()}},w.getTotal());E.render({content:t.render({})}),A.setPaymentButton(""),w.clearOrder()})).catch((function(t){console.error(t)}))})),P.on("card:selected",(function(t){w.setPreview(t)})),P.on("preview:changed",(function(t){var e=new _("card",cloneTemplate(h),{onClick:function onClick(){return P.emit("card:addedToBasket",t)}});E.render({content:e.render({title:t.title,image:t.image,description:t.description,category:t.category,price:t.price})}),w.isItemSelected(t)&&(e.setButtonState(),e.setSelected())})),P.on("card:addedToBasket",(function(t){w.addItem(t),E.close()})),P.on("card:removeFromBasket",(function(t){w.removeItem(t.id),E.render({content:B.render({items:w.basket,total:w.getTotal()})})})),P.on("basket:open",(function(){E.render({content:B.render({items:w.basket,total:w.getTotal()})})})),P.on("itemsListBasket: changed",(function(t){j.counter=Object.keys(t).length,w.basket=t})),P.on("modal:open",(function(){j.locked=!0})),P.on("modal:close",(function(){j.locked=!1})),v.getItems().then(w.setCatalog.bind(w)).catch(console.error)})();
//# sourceMappingURL=main.js.map